---
apiVersion: v1
kind: ConfigMap
metadata:
  name: es-config
  labels:
    application: logging
    component: elasticsearch
data:
  elasticsearch.yml: |
    cluster.name: es-cluster
    network.host: 0.0.0.0
    http.host: 0.0.0.0
    transport.host: 0.0.0.0
    bootstrap.memory_lock: false
    xpack.security.enabled: false

    # minimum_master_nodes need to be explicitly set when bound on a public IP
    # set to 1 to allow single node clusters
    # Details: https://github.com/elastic/elasticsearch/pull/17288
    discovery.zen.minimum_master_nodes: 3
    discovery.zen.ping.unicast.hosts: ${MASTER_DISCOVERY_HOST}

    node.name: ${NODE_NAME}
    node.master: ${NODE_MASTER}
    node.ingest: ${NODE_INGEST}
    node.data: ${NODE_DATA}
